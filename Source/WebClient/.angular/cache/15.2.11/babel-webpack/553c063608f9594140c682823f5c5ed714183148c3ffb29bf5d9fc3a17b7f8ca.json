{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./stat.service\";\nimport * as i2 from \"@angular/common\";\nfunction StatListComponent_tr_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 4);\n    i0.ɵɵlistener(\"click\", function StatListComponent_tr_10_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const stat_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onSelectStat(stat_r2.id));\n    });\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const stat_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(stat_r2.deviceName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 2, stat_r2.lastUpdateDateTime, \"short\"));\n  }\n}\nfunction StatListComponent_div_11_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const event_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r6.eventDateTime);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r6.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r6.description);\n  }\n}\nfunction StatListComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"h2\");\n    i0.ɵɵtext(10, \"\\u0421\\u043E\\u0431\\u044B\\u0442\\u0438\\u044F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"table\")(12, \"thead\")(13, \"tr\")(14, \"th\");\n    i0.ɵɵtext(15, \"\\u0414\\u0430\\u0442\\u0430\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"\\u0421\\u043E\\u0431\\u044B\\u0442\\u0438\\u0435\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\");\n    i0.ɵɵtext(19, \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"tbody\");\n    i0.ɵɵtemplate(21, StatListComponent_div_11_tr_21_Template, 7, 3, \"tr\", 6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.selectedStat.deviceName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u0418\\u0434\\u0435\\u043D\\u0442\\u0438\\u0444\\u0438\\u043A\\u0430\\u0442\\u043E\\u0440: \", ctx_r1.selectedStat.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u0422\\u0438\\u043F \\u0443\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u0430: \", ctx_r1.selectedStat.operatingSystem, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u0412\\u0435\\u0440\\u0441\\u0438\\u044F Client: \", ctx_r1.selectedStat.version, \"\");\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.statEvents);\n  }\n}\nexport class StatListComponent {\n  constructor(StatService) {\n    this.StatService = StatService;\n    this.stats = [];\n    this.selectedStat = null;\n    this.statEvents = [];\n  }\n  ngOnInit() {\n    this.loadStats();\n  }\n  loadStats() {\n    this.StatService.getStats().subscribe(stats => {\n      this.stats = stats;\n    });\n  }\n  onSelectStat(statId) {\n    this.selectedStat = this.stats.find(stat => stat.id === statId) || null;\n    if (this.selectedStat) {\n      this.StatService.getEventsByStatId(statId).subscribe(events => {\n        this.statEvents = events;\n      });\n    }\n  }\n  static {\n    this.ɵfac = function StatListComponent_Factory(t) {\n      return new (t || StatListComponent)(i0.ɵɵdirectiveInject(i1.StatService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: StatListComponent,\n      selectors: [[\"app-stat-list\"]],\n      decls: 12,\n      vars: 2,\n      consts: [[1, \"container\"], [1, \"stats-table\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"stat-details\", 4, \"ngIf\"], [3, \"click\"], [1, \"stat-details\"], [4, \"ngFor\", \"ngForOf\"]],\n      template: function StatListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"table\")(3, \"thead\")(4, \"tr\")(5, \"th\");\n          i0.ɵɵtext(6, \"\\u0418\\u043C\\u044F \\u0443\\u0437\\u043B\\u0430\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"th\");\n          i0.ɵɵtext(8, \"\\u0414\\u0430\\u0442\\u0430 \\u043F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0435\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(9, \"tbody\");\n          i0.ɵɵtemplate(10, StatListComponent_tr_10_Template, 6, 5, \"tr\", 2);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(11, StatListComponent_div_11_Template, 22, 5, \"div\", 3);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngForOf\", ctx.stats);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedStat);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i2.DatePipe],\n      styles: [\".table[_ngcontent-%COMP%] {\\r\\n\\twidth: 100%;\\r\\n\\tmargin-bottom: 20px;\\r\\n\\tborder: 1px solid #dddddd;\\r\\n\\tborder-collapse: collapse; \\r\\n}\\r\\n.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\r\\n\\tfont-weight: bold;\\r\\n\\tpadding: 5px;\\r\\n\\tbackground: #efefef;\\r\\n\\tborder: 1px solid #dddddd;\\r\\n}\\r\\n.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\r\\n\\tborder: 1px solid #dddddd;\\r\\n\\tpadding: 5px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvU3RhdC9zdGF0LWxpc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtDQUNDLFdBQVc7Q0FDWCxtQkFBbUI7Q0FDbkIseUJBQXlCO0NBQ3pCLHlCQUF5QjtBQUMxQjtBQUNBO0NBQ0MsaUJBQWlCO0NBQ2pCLFlBQVk7Q0FDWixtQkFBbUI7Q0FDbkIseUJBQXlCO0FBQzFCO0FBQ0E7Q0FDQyx5QkFBeUI7Q0FDekIsWUFBWTtBQUNiIiwic291cmNlc0NvbnRlbnQiOlsiLnRhYmxlIHtcclxuXHR3aWR0aDogMTAwJTtcclxuXHRtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG5cdGJvcmRlcjogMXB4IHNvbGlkICNkZGRkZGQ7XHJcblx0Ym9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgXHJcbn1cclxuLnRhYmxlIHRoIHtcclxuXHRmb250LXdlaWdodDogYm9sZDtcclxuXHRwYWRkaW5nOiA1cHg7XHJcblx0YmFja2dyb3VuZDogI2VmZWZlZjtcclxuXHRib3JkZXI6IDFweCBzb2xpZCAjZGRkZGRkO1xyXG59XHJcbi50YWJsZSB0ZCB7XHJcblx0Ym9yZGVyOiAxcHggc29saWQgI2RkZGRkZDtcclxuXHRwYWRkaW5nOiA1cHg7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"mappings":";;;;;;IAUgBA,6BAA+D;IAAhCA;MAAA;MAAA;MAAA;MAAA,OAASA,8CAAqB;IAAA,EAAC;IAC1DA,0BAAI;IAAAA,YAAmB;IAAAA,iBAAK;IAC5BA,0BAAI;IAAAA,YAA0C;;IAAAA,iBAAK;;;;IAD/CA,eAAmB;IAAnBA,wCAAmB;IACnBA,eAA0C;IAA1CA,+EAA0C;;;;;IAuBtDA,0BAAqC;IAC7BA,YAAuB;IAAAA,iBAAK;IAChCA,0BAAI;IAAAA,YAAc;IAAAA,iBAAK;IACvBA,0BAAI;IAAAA,YAAqB;IAAAA,iBAAK;;;;IAF1BA,eAAuB;IAAvBA,4CAAuB;IACvBA,eAAc;IAAdA,mCAAc;IACdA,eAAqB;IAArBA,0CAAqB;;;;;IAnBzCA,8BAA+C;IACvCA,YAA2B;IAAAA,iBAAK;IACpCA,yBAAG;IAAAA,YAAkC;IAAAA,iBAAI;IACzCA,yBAAG;IAAAA,YAAgD;IAAAA,iBAAI;IACvDA,yBAAG;IAAAA,YAAuC;IAAAA,iBAAI;IAE9CA,0BAAI;IAAAA,2DAAO;IAAAA,iBAAK;IAChBA,8BAAO;IAGSA,yCAAI;IAAAA,iBAAK;IACbA,2BAAI;IAAAA,2DAAO;IAAAA,iBAAK;IAChBA,2BAAI;IAAAA,iEAAQ;IAAAA,iBAAK;IAGzBA,8BAAO;IACHA,yEAIK;IACTA,iBAAQ;;;;IApBRA,eAA2B;IAA3BA,oDAA2B;IAC5BA,eAAkC;IAAlCA,qIAAkC;IAClCA,eAAgD;IAAhDA,mJAAgD;IAChDA,eAAuC;IAAvCA,uGAAuC;IAYZA,gBAAa;IAAbA,2CAAa;;;ACzB/C,OAAM,MAAOC,iBAAiB;EAK1BC,YAAoBC,WAAwB;IAAxB,gBAAW,GAAXA,WAAW;IAJ/B,UAAK,GAAW,EAAE;IAClB,iBAAY,GAAgB,IAAI;IAChC,eAAU,GAAY,EAAE;EAEuB;EAE/CC,QAAQ;IACJ,IAAI,CAACC,SAAS,EAAE;EACpB;EAEAA,SAAS;IACL,IAAI,CAACF,WAAW,CAACG,QAAQ,EAAE,CAACC,SAAS,CAACC,KAAK,IAAG;MAC1C,IAAI,CAACA,KAAK,GAAGA,KAAK;IACtB,CAAC,CAAC;EACN;EAEAC,YAAY,CAACC,MAAc;IACvB,IAAI,CAACC,YAAY,GAAG,IAAI,CAACH,KAAK,CAACI,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAAC,IAAI,IAAI;IAEvE,IAAI,IAAI,CAACC,YAAY,EAAC;MAClB,IAAI,CAACR,WAAW,CAACY,iBAAiB,CAACL,MAAM,CAAC,CAACH,SAAS,CAACS,MAAM,IAAG;QAC1D,IAAI,CAACC,UAAU,GAAGD,MAAM;MAC5B,CAAC,CAAC;;EAEV;;;uBAzBSf,iBAAiB;IAAA;EAAA;;;YAAjBA,iBAAiB;MAAAiB;MAAAC;MAAAC;MAAAC;MAAAC;QAAA;UDV9BtB,8BAAuB;UAKCA,2DAAQ;UAAAA,iBAAK;UACjBA,0BAAI;UAAAA,4JAAyB;UAAAA,iBAAK;UAG1CA,6BAAO;UACHA,kEAGK;UACTA,iBAAQ;UAKpBA,qEAuBM;;;UAhC+BA,gBAAQ;UAARA,mCAAQ;UASlBA,eAAkB;UAAlBA,uCAAkB","names":["i0","StatListComponent","constructor","StatService","ngOnInit","loadStats","getStats","subscribe","stats","onSelectStat","statId","selectedStat","find","stat","id","getEventsByStatId","events","statEvents","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\Projects\\MonitoringService\\Source\\WebClient\\src\\app\\Stat\\stat-list.component.html","D:\\Projects\\MonitoringService\\Source\\WebClient\\src\\app\\Stat\\stat-list.component.ts"],"sourcesContent":["<div class=\"container\">\r\n    <div class=\"stats-table\">\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>Имя узла</th>\r\n                    <th>Дата последней статистики</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let stat of stats\" (click)=\"onSelectStat(stat.id)\">\r\n                    <td>{{stat.deviceName}}</td>\r\n                    <td>{{stat.lastUpdateDateTime | date:'short'}}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"stat-details\" *ngIf=\"selectedStat\">\r\n    <h2>{{selectedStat.deviceName}}</h2>\r\n    <p>Идентификатор: {{selectedStat.id}}</p>\r\n    <p>Тип устройства: {{selectedStat.operatingSystem}}</p>\r\n    <p>Версия Client: {{selectedStat.version}}</p>\r\n\r\n    <h2>События</h2>\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th>Дата</th>\r\n                <th>Событие</th>\r\n                <th>Описание</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor=\"let event of statEvents\">\r\n                <th>{{event.eventDateTime}}</th>\r\n                <th>{{event.name}}</th>\r\n                <th>{{event.description}}</th>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>","import { Component, OnInit } from \"@angular/core\";\r\nimport { StatService } from \"./stat.service\";\r\nimport { Stat } from \"./stat.model\";\r\nimport { Event } from \"../Events/event.model\";\r\n\r\n@Component({\r\n    selector: 'app-stat-list',\r\n    templateUrl: './stat-list.component.html',\r\n    styleUrls: ['./stat-list.component.css']\r\n})\r\nexport class StatListComponent implements OnInit{\r\n    stats: Stat[] = [];\r\n    selectedStat: Stat | null = null;\r\n    statEvents: Event[] = [];\r\n\r\n    constructor(private StatService: StatService) {}\r\n\r\n    ngOnInit(): void {\r\n        this.loadStats();\r\n    }\r\n\r\n    loadStats() {\r\n        this.StatService.getStats().subscribe(stats => {\r\n            this.stats = stats; \r\n        })\r\n    }\r\n\r\n    onSelectStat(statId: number){\r\n        this.selectedStat = this.stats.find(stat => stat.id === statId) || null;\r\n\r\n        if (this.selectedStat){    \r\n            this.StatService.getEventsByStatId(statId).subscribe(events =>{\r\n                this.statEvents = events;\r\n            })\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}